{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "autosize": "pad",
  "padding": 5,
  "width": 500,
  "height": 300,
  "style": "cell",
  "data": [
    {
      "name": "data-e0bba053c61b58121b06dac48ca520a3",
      "values": [
        {"Club": "FC Barcelona", "Country": "Spain", "Rating": 86},
        {"Club": "Real Madrid", "Country": "Spain", "Rating": 86},
        {"Club": "Atletico Madrid", "Country": "Spain", "Rating": 83},
        {"Club": "Valencia CF", "Country": "Spain", "Rating": 81},
        {"Club": "Real Betis", "Country": "Spain", "Rating": 80},
        {"Club": "Athletic Club", "Country": "Spain", "Rating": 79},
        {"Club": "Sevilla FC", "Country": "Spain", "Rating": 79},
        {"Club": "Real Sociedad", "Country": "Spain", "Rating": 78},
        {"Club": "Villarreal CF", "Country": "Spain", "Rating": 78},
        {"Club": "Getafe CF", "Country": "Spain", "Rating": 78},
        {"Club": "RC Celta", "Country": "Spain", "Rating": 77},
        {"Club": "SD Eibar", "Country": "Spain", "Rating": 77},
        {"Club": "RCD Espanyol", "Country": "Spain", "Rating": 77},
        {"Club": "Levante UD", "Country": "Spain", "Rating": 76},
        {"Club": "D. Alaves", "Country": "Spain", "Rating": 76},
        {"Club": "R. Valladolid CF", "Country": "Spain", "Rating": 75},
        {"Club": "CD Leganes", "Country": "Spain", "Rating": 75},
        {"Club": "Granada CF", "Country": "Spain", "Rating": 73},
        {"Club": "CA Osasuna", "Country": "Spain", "Rating": 73},
        {"Club": "RCD Mallorca", "Country": "Spain", "Rating": 73},
        {"Club": "FC Bayern", "Country": "Germany", "Rating": 85},
        {"Club": "Dortmund", "Country": "Germany", "Rating": 82},
        {"Club": "Leverkusen", "Country": "Germany", "Rating": 80},
        {"Club": "RB Leipzig", "Country": "Germany", "Rating": 79},
        {"Club": "TSG Hoffenheim", "Country": "Germany", "Rating": 78},
        {"Club": "Frankfurt", "Country": "Germany", "Rating": 78},
        {"Club": "Mâ€™gladbach", "Country": "Germany", "Rating": 78},
        {"Club": "VfL Wolfsburg", "Country": "Germany", "Rating": 78},
        {"Club": "Werder Bremen", "Country": "Germany", "Rating": 77},
        {"Club": "Hertha BSC", "Country": "Germany", "Rating": 76},
        {"Club": "Schalke", "Country": "Germany", "Rating": 76},
        {"Club": "Koln", "Country": "Germany", "Rating": 75},
        {"Club": "FC Augsburg", "Country": "Germany", "Rating": 75},
        {"Club": "1. FSV Mainz 05", "Country": "Germany", "Rating": 75},
        {"Club": "SC Freiburg", "Country": "Germany", "Rating": 74},
        {"Club": "Dusseldorf", "Country": "Germany", "Rating": 73},
        {"Club": "Union Berlin", "Country": "Germany", "Rating": 72},
        {"Club": "Paderborn", "Country": "Germany", "Rating": 70},
        {"Club": "Juventus", "Country": "Italy", "Rating": 85},
        {"Club": "Napoli", "Country": "Italy", "Rating": 82},
        {"Club": "Inter", "Country": "Italy", "Rating": 81},
        {"Club": "Lazio", "Country": "Italy", "Rating": 80},
        {"Club": "Milan", "Country": "Italy", "Rating": 80},
        {"Club": "Roma", "Country": "Italy", "Rating": 80},
        {"Club": "Atalanta", "Country": "Italy", "Rating": 79},
        {"Club": "Torino", "Country": "Italy", "Rating": 78},
        {"Club": "Fiorentina", "Country": "Italy", "Rating": 76},
        {"Club": "Cagliari", "Country": "Italy", "Rating": 76},
        {"Club": "Sampdoria", "Country": "Italy", "Rating": 75},
        {"Club": "Udinese", "Country": "Italy", "Rating": 75},
        {"Club": "Bologna", "Country": "Italy", "Rating": 75},
        {"Club": "Sassuolo", "Country": "Italy", "Rating": 75},
        {"Club": "Genoa", "Country": "Italy", "Rating": 75},
        {"Club": "Parma", "Country": "Italy", "Rating": 73},
        {"Club": "SPAL", "Country": "Italy", "Rating": 73},
        {"Club": "Hellas Verona", "Country": "Italy", "Rating": 73},
        {"Club": "Brescia", "Country": "Italy", "Rating": 72},
        {"Club": "Lecce", "Country": "Italy", "Rating": 72},
        {"Club": "Paris", "Country": "France", "Rating": 85},
        {"Club": "OL", "Country": "France", "Rating": 79},
        {"Club": "AS Monaco", "Country": "France", "Rating": 79},
        {"Club": "OM", "Country": "France", "Rating": 77},
        {"Club": "ASSE", "Country": "France", "Rating": 76},
        {"Club": "LOSC Lille", "Country": "France", "Rating": 76},
        {"Club": "Stade Rennais", "Country": "France", "Rating": 75},
        {"Club": "Montpellier HSC", "Country": "France", "Rating": 75},
        {"Club": "OGC Nice", "Country": "France", "Rating": 75},
        {"Club": "Girondins de Bx", "Country": "France", "Rating": 75},
        {"Club": "Angers SCO", "Country": "France", "Rating": 74},
        {"Club": "RC Strasbourg", "Country": "France", "Rating": 74},
        {"Club": "Toulouse FC", "Country": "France", "Rating": 74},
        {"Club": "Stade de Reims", "Country": "France", "Rating": 74},
        {"Club": "Amiens SC", "Country": "France", "Rating": 73},
        {"Club": "FC Nantes", "Country": "France", "Rating": 73},
        {"Club": "Stade Brestois", "Country": "France", "Rating": 72},
        {"Club": "FC Metz", "Country": "France", "Rating": 71},
        {"Club": "Dijon FCO", "Country": "France", "Rating": 71},
        {"Club": "Nimes Olympique", "Country": "France", "Rating": 71},
        {"Club": "Manchester City", "Country": "England", "Rating": 86},
        {"Club": "Liverpool", "Country": "England", "Rating": 84},
        {"Club": "Spurs", "Country": "England", "Rating": 83},
        {"Club": "Arsenal", "Country": "England", "Rating": 81},
        {"Club": "Manchester Utd", "Country": "England", "Rating": 81},
        {"Club": "Chelsea", "Country": "England", "Rating": 81},
        {"Club": "Everton", "Country": "England", "Rating": 79},
        {"Club": "West Ham", "Country": "England", "Rating": 78},
        {"Club": "Leicester City", "Country": "England", "Rating": 78},
        {"Club": "Watford", "Country": "England", "Rating": 78},
        {"Club": "Wolves", "Country": "England", "Rating": 78},
        {"Club": "AFC Bournemouth", "Country": "England", "Rating": 77},
        {"Club": "Newcastle Utd", "Country": "England", "Rating": 77},
        {"Club": "Crystal Palace", "Country": "England", "Rating": 77},
        {"Club": "Burnley", "Country": "England", "Rating": 76},
        {"Club": "Southampton", "Country": "England", "Rating": 76},
        {"Club": "Brighton", "Country": "England", "Rating": 76},
        {"Club": "Aston Villa", "Country": "England", "Rating": 75},
        {"Club": "Norwich", "Country": "England", "Rating": 74},
        {"Club": "Sheffield Utd", "Country": "England", "Rating": 73}
      ]
    },
    {
      "name": "data_1",
      "source": "data-e0bba053c61b58121b06dac48ca520a3",
      "transform": [
        {
          "type": "joinaggregate",
          "as": ["lower_box_Rating", "upper_box_Rating"],
          "ops": ["q1", "q3"],
          "fields": ["Rating", "Rating"],
          "groupby": ["Country"]
        }
      ]
    },
    {
      "name": "data_2",
      "source": "data_1",
      "transform": [
        {
          "type": "filter",
          "expr": "(datum[\"Rating\"] < datum[\"lower_box_Rating\"] - 1.5 * (datum[\"upper_box_Rating\"] - datum[\"lower_box_Rating\"])) || (datum[\"Rating\"] > datum[\"upper_box_Rating\"] + 1.5 * (datum[\"upper_box_Rating\"] - datum[\"lower_box_Rating\"]))"
        },
        {
          "type": "filter",
          "expr": "datum[\"Rating\"] !== null && !isNaN(datum[\"Rating\"])"
        }
      ]
    },
    {
      "name": "data_3",
      "source": "data_1",
      "transform": [
        {
          "type": "filter",
          "expr": "(datum[\"lower_box_Rating\"] - 1.5 * (datum[\"upper_box_Rating\"] - datum[\"lower_box_Rating\"]) <= datum[\"Rating\"]) && (datum[\"Rating\"] <= datum[\"upper_box_Rating\"] + 1.5 * (datum[\"upper_box_Rating\"] - datum[\"lower_box_Rating\"]))"
        },
        {
          "type": "aggregate",
          "groupby": ["Country"],
          "ops": ["min", "max", "min", "max"],
          "fields": [
            "Rating",
            "Rating",
            "lower_box_Rating",
            "upper_box_Rating"
          ],
          "as": [
            "lower_whisker_Rating",
            "upper_whisker_Rating",
            "lower_box_Rating",
            "upper_box_Rating"
          ]
        }
      ]
    },
    {
      "name": "data_4",
      "source": "data_3",
      "transform": [
        {
          "type": "filter",
          "expr": "datum[\"lower_whisker_Rating\"] !== null && !isNaN(datum[\"lower_whisker_Rating\"])"
        }
      ]
    },
    {
      "name": "data_5",
      "source": "data_3",
      "transform": [
        {
          "type": "filter",
          "expr": "datum[\"upper_box_Rating\"] !== null && !isNaN(datum[\"upper_box_Rating\"])"
        }
      ]
    },
    {
      "name": "data_6",
      "source": "data-e0bba053c61b58121b06dac48ca520a3",
      "transform": [
        {
          "type": "aggregate",
          "groupby": ["Country"],
          "ops": ["q1", "q3", "median", "min", "max"],
          "fields": ["Rating", "Rating", "Rating", "Rating", "Rating"],
          "as": [
            "lower_box_Rating",
            "upper_box_Rating",
            "mid_box_Rating",
            "min_Rating",
            "max_Rating"
          ]
        }
      ]
    },
    {
      "name": "data_7",
      "source": "data_6",
      "transform": [
        {
          "type": "filter",
          "expr": "datum[\"lower_box_Rating\"] !== null && !isNaN(datum[\"lower_box_Rating\"])"
        }
      ]
    },
    {
      "name": "data_8",
      "source": "data_6",
      "transform": [
        {
          "type": "filter",
          "expr": "datum[\"mid_box_Rating\"] !== null && !isNaN(datum[\"mid_box_Rating\"])"
        }
      ]
    }
  ],
  "marks": [
    {
      "name": "layer_0_layer_0_marks",
      "type": "symbol",
      "style": ["point", "boxplot-outliers"],
      "from": {"data": "data_2"},
      "encode": {
        "update": {
          "opacity": {"value": 0.7},
          "fill": {"value": "transparent"},
          "stroke": {"value": "#4c78a8"},
          "x": {"scale": "x", "field": "Country", "band": 0.5},
          "y": {"scale": "y", "field": "Rating"}
        }
      }
    },
    {
      "name": "layer_0_layer_1_layer_0_marks",
      "type": "rule",
      "style": ["rule", "boxplot-rule"],
      "from": {"data": "data_4"},
      "encode": {
        "update": {
          "stroke": {"value": "black"},
          "tooltip": {
            "signal": "{\"Upper Whisker of Rating\": format(datum[\"upper_whisker_Rating\"], \"\"), \"Lower Whisker of Rating\": format(datum[\"lower_whisker_Rating\"], \"\"), \"Country\": ''+datum[\"Country\"]}"
          },
          "x": {"scale": "x", "field": "Country", "band": 0.5},
          "y": {"scale": "y", "field": "lower_whisker_Rating"},
          "y2": {"scale": "y", "field": "lower_box_Rating"}
        }
      }
    },
    {
      "name": "layer_0_layer_1_layer_1_marks",
      "type": "rule",
      "style": ["rule", "boxplot-rule"],
      "from": {"data": "data_5"},
      "encode": {
        "update": {
          "stroke": {"value": "black"},
          "tooltip": {
            "signal": "{\"Upper Whisker of Rating\": format(datum[\"upper_whisker_Rating\"], \"\"), \"Lower Whisker of Rating\": format(datum[\"lower_whisker_Rating\"], \"\"), \"Country\": ''+datum[\"Country\"]}"
          },
          "x": {"scale": "x", "field": "Country", "band": 0.5},
          "y": {"scale": "y", "field": "upper_box_Rating"},
          "y2": {"scale": "y", "field": "upper_whisker_Rating"}
        }
      }
    },
    {
      "name": "layer_1_layer_0_marks",
      "type": "rect",
      "style": ["bar", "boxplot-box"],
      "from": {"data": "data_7"},
      "encode": {
        "update": {
          "fill": {"value": "#4c78a8"},
          "tooltip": {
            "signal": "{\"Max of Rating\": format(datum[\"max_Rating\"], \"\"), \"Q3 of Rating\": format(datum[\"upper_box_Rating\"], \"\"), \"Median of Rating\": format(datum[\"mid_box_Rating\"], \"\"), \"Q1 of Rating\": format(datum[\"lower_box_Rating\"], \"\"), \"Min of Rating\": format(datum[\"min_Rating\"], \"\"), \"Country\": ''+datum[\"Country\"]}"
          },
          "xc": {"scale": "x", "field": "Country", "band": 0.5},
          "width": {"value": 14},
          "y": {"scale": "y", "field": "lower_box_Rating"},
          "y2": {"scale": "y", "field": "upper_box_Rating"}
        }
      }
    },
    {
      "name": "layer_1_layer_1_marks",
      "type": "rect",
      "style": ["tick", "boxplot-median"],
      "from": {"data": "data_8"},
      "encode": {
        "update": {
          "opacity": {"value": 0.7},
          "fill": {"value": "white"},
          "tooltip": {
            "signal": "{\"Max of Rating\": format(datum[\"max_Rating\"], \"\"), \"Q3 of Rating\": format(datum[\"upper_box_Rating\"], \"\"), \"Median of Rating\": format(datum[\"mid_box_Rating\"], \"\"), \"Q1 of Rating\": format(datum[\"lower_box_Rating\"], \"\"), \"Min of Rating\": format(datum[\"min_Rating\"], \"\"), \"Country\": ''+datum[\"Country\"]}"
          },
          "xc": {"scale": "x", "field": "Country", "band": 0.5},
          "yc": {"scale": "y", "field": "mid_box_Rating"},
          "width": {"value": 14},
          "height": {"value": 1}
        }
      }
    }
  ],
  "scales": [
    {
      "name": "x",
      "type": "band",
      "domain": {
        "fields": [
          {"data": "data_2", "field": "Country"},
          {"data": "data_4", "field": "Country"},
          {"data": "data_5", "field": "Country"},
          {"data": "data_7", "field": "Country"},
          {"data": "data_8", "field": "Country"}
        ],
        "sort": true
      },
      "range": [0, {"signal": "width"}],
      "paddingInner": 0,
      "paddingOuter": 0
    },
    {
      "name": "y",
      "type": "linear",
      "domain": {"fields": [{"data": "data_2", "field": "Rating"}, [65, 90]]},
      "range": [{"signal": "height"}, 0],
      "nice": true,
      "zero": true
    }
  ],
  "axes": [
    {
      "scale": "x",
      "orient": "bottom",
      "grid": false,
      "title": "Country",
      "labelAlign": "right",
      "labelAngle": 270,
      "labelBaseline": "middle",
      "labelOverlap": true,
      "zindex": 1
    },
    {
      "scale": "y",
      "orient": "left",
      "grid": false,
      "title": "Rating",
      "labelOverlap": true,
      "tickCount": {"signal": "ceil(height/40)"},
      "zindex": 1
    },
    {
      "scale": "y",
      "orient": "left",
      "gridScale": "x",
      "grid": true,
      "tickCount": {"signal": "ceil(height/40)"},
      "domain": false,
      "labels": false,
      "maxExtent": 0,
      "minExtent": 0,
      "ticks": false,
      "zindex": 0
    }
  ]
}